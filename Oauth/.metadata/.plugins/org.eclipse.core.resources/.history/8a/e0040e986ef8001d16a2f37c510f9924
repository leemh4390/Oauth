<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace = mapper파일의 아이디 값 -->
<mapper namespace="kr.co.oauth.dao.OauthDAO">
	
	<select id="selectCountEmail" resultType="int">
		SELECT COUNT(`email`) AS 'count' FROM `users` 
		WHERE `email` = #{email};
	</select>
	
	<insert id="insertSnsUser">
    	insert into
    	sns_info(id, sns_id, sns_type, sns_name, sns_profile,
    	sns_connect_date)
    	values (#{id}, #{snsId}, #{snsType}, #{snsName}, #{snsProfile}, now() );
  	</insert>
  	
  	<insert id="insertNaverUser">
  	INSERT INTO `users` SET
		`id` 			= #1,
		`username` 		= #{name},
		`email` 		= #{email},
		`nickname` 		= #{nick},
		`sns_id` 		= #{snsid},
		`sns_type` 		= 'naver',
		`create_date` 	= NOW();
  	</insert>
	
</mapper>